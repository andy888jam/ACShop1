(()=>{"use strict";console.log("JS loaded!");const e=document.querySelectorAll(".step"),t=document.querySelector(".next"),i=document.querySelector(".prev"),n=document.querySelector(".main__button"),s=document.querySelectorAll(".part"),a=document.querySelector(".main__cart__items"),c=(document.querySelector(".item-detail__numbers__plus"),document.querySelector(".item-detail__numbers__minus"),document.querySelector(".total-price"));let m=0;const l=[{id:1,img:"image/Block@2x.png",name:"破壞補丁修身牛仔褲",price:3999,quantity:1},{id:2,img:"image/Block2@2x.png",name:"刷色直筒牛仔褲",price:1299,quantity:1}];function _(){let e=0;l.forEach((t=>{e+=t.price*t.quantity})),c.innerHTML=`$${e}`}l.forEach((e=>{a.innerHTML+=`\n    <div class="main__cart__items__item" id = "${e.id}">\n      <div class="item-picture">\n        <img src="${e.img}" alt="">\n      </div>\n      <div class="item-detail">\n        <p class="item-name">${e.name}</p>\n        <div class="numbers">\n          <button class="item-detail__numbers__minus">-</button>\n          <p class="item-detail__numbers__number">${e.quantity}</p>\n          <button class="item-detail__numbers__plus">+</button>\n        </div>\n        <div class="item-price">$${e.price}</div>\n    </div>\n  `})),n.addEventListener("click",(function(n){n.preventDefault();const a=e[m];if(n.target.matches(".next")&&"確認下單"!==n.target.innerHTML){console.log("hi");const t=e[m+1];a.classList.remove("active"),a.classList.add("checked"),t.classList.add("active"),s[m].classList.toggle("d-none"),s[m+1].classList.toggle("d-none"),m+=1}else if(n.target.matches(".prev")){const t=e[m-1];a.classList.remove("active"),t.classList.remove("checked"),t.classList.add("active"),s[m].classList.toggle("d-none"),s[m-1].classList.toggle("d-none"),m-=1}0===m?(i.classList.add("d-none"),t.classList.remove("next-shorter")):(i.classList.remove("d-none"),t.classList.add("next-shorter")),t.innerHTML=2===m?"確認下單":"下一步<span>&rarr;</span>"})),a.addEventListener("click",(function(e){if(e.target.matches(".item-detail__numbers__plus")){const t=e.target.closest(".main__cart__items__item").id;a.innerHTML="",l.forEach((e=>{e.id===Number(t)?(a.innerHTML+=`\n        <div class="main__cart__items__item" id = "${e.id}">\n          <div class="item-picture">\n            <img src="${e.img}" alt="">\n          </div>\n          <div class="item-detail">\n            <p class="item-name">${e.name}</p>\n            <div class="numbers">\n              <button class="item-detail__numbers__minus">-</button>\n              <p class="item-detail__numbers__number">${e.quantity+1}</p>\n              <button class="item-detail__numbers__plus">+</button>\n            </div>\n            <div class="item-price">$${e.price}</div>\n        </div>\n      `,e.quantity++,_()):a.innerHTML+=`<div class="main__cart__items__item" id = "${e.id}">\n          <div class="item-picture">\n            <img src="${e.img}" alt="">\n          </div>\n          <div class="item-detail">\n            <p class="item-name">${e.name}</p>\n            <div class="numbers">\n              <button class="item-detail__numbers__minus">-</button>\n              <p class="item-detail__numbers__number">${e.quantity}</p>\n              <button class="item-detail__numbers__plus">+</button>\n            </div>\n            <div class="item-price">$${e.price}</div>\n        </div>`}))}else if(e.target.matches(".item-detail__numbers__minus")){let t=e.target.closest(".main__cart__items__item").id;a.innerHTML="",l.forEach((e=>{e.id===Number(t)&&e.quantity>=2?(a.innerHTML+=`\n            <div class="main__cart__items__item" id = "${e.id}">\n              <div class="item-picture">\n                <img src="${e.img}" alt="">\n              </div>\n              <div class="item-detail">\n                <p class="item-name">${e.name}</p>\n                <div class="numbers">\n                  <button class="item-detail__numbers__minus">-</button>\n                  <p class="item-detail__numbers__number">${e.quantity-1}</p>\n                  <button class="item-detail__numbers__plus">+</button>\n                </div>\n                <div class="item-price">$${e.price}</div>\n            </div>\n          `,e.quantity--,_()):a.innerHTML+=`<div class="main__cart__items__item" id = "${e.id}">\n              <div class="item-picture">\n                <img src="${e.img}" alt="">\n              </div>\n              <div class="item-detail">\n                <p class="item-name">${e.name}</p>\n                <div class="numbers">\n                  <button class="item-detail__numbers__minus">-</button>\n                  <p class="item-detail__numbers__number">${e.quantity}</p>\n                  <button class="item-detail__numbers__plus">+</button>\n                </div>\n                <div class="item-price">$${e.price}</div>\n            </div>`}))}}))})();