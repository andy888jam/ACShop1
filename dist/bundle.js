(()=>{"use strict";console.log("JS loaded!");const e=document.querySelectorAll(".step"),t=document.querySelector(".next"),i=document.querySelector(".prev"),n=document.querySelector(".main__button"),s=document.querySelectorAll(".part"),a=document.querySelector(".main__cart__items"),c=document.querySelector(".total-price"),l=document.querySelector(".form__transport"),m=document.querySelector(".isDeliver");let d=0,r=0;const _=[{id:1,img:"image/Block@2x.png",name:"破壞補丁修身牛仔褲",price:3999,quantity:1},{id:2,img:"image/Block2@2x.png",name:"刷色直筒牛仔褲",price:1299,quantity:1}];function u(){let e=0+r;_.forEach((t=>{e+=t.price*t.quantity})),c.innerHTML=`$${e}`}_.forEach((e=>{a.innerHTML+=`\n    <div class="main__cart__items__item" id = "${e.id}">\n      <div class="item-picture">\n        <img src="${e.img}" alt="">\n      </div>\n      <div class="item-detail">\n        <div class="detail-left">\n          <p class="item-name">${e.name}</p>\n          <div class="numbers">\n            <button class="item-detail__numbers__minus">-</button>\n            <p class="item-detail__numbers__number">${e.quantity}</p>\n            <button class="item-detail__numbers__plus">+</button>\n          </div>\n        </div>\n        <div class="item-price">$${e.price}</div>\n    </div>\n  `})),n.addEventListener("click",(function(n){n.preventDefault();const a=e[d];if(n.target.matches(".next")&&"確認下單"!==n.target.innerHTML){console.log("hi");const t=e[d+1];a.classList.remove("active"),a.classList.add("checked"),t.classList.add("active"),s[d].classList.toggle("d-none"),s[d+1].classList.toggle("d-none"),d+=1}else if(n.target.matches(".prev")){const t=e[d-1];a.classList.remove("active"),t.classList.remove("checked"),t.classList.add("active"),s[d].classList.toggle("d-none"),s[d-1].classList.toggle("d-none"),d-=1}0===d?(i.classList.add("d-none"),t.classList.remove("next-shorter")):(i.classList.remove("d-none"),t.classList.add("next-shorter")),t.innerHTML=2===d?"確認下單":"下一步<span>&rarr;</span>"})),a.addEventListener("click",(function(e){if(e.target.matches(".item-detail__numbers__plus")){const t=e.target.closest(".main__cart__items__item").id;a.innerHTML="",_.forEach((e=>{e.id===Number(t)?(a.innerHTML+=`\n        <div class="main__cart__items__item" id = "${e.id}">\n          <div class="item-picture">\n            <img src="${e.img}" alt="">\n          </div>\n          <div class="item-detail">\n            <div class="detail-left">\n              <p class="item-name">${e.name}</p>\n              <div class="numbers">\n                <button class="item-detail__numbers__minus">-</button>\n                <p class="item-detail__numbers__number">${e.quantity+1}</p>\n                <button class="item-detail__numbers__plus">+</button>\n              </div>      \n            </div>\n            <div class="item-price">$${e.price}</div>\n          </div>\n        </div>\n      `,e.quantity++,u()):a.innerHTML+=`<div class="main__cart__items__item" id = "${e.id}">\n          <div class="item-picture">\n            <img src="${e.img}" alt="">\n          </div>\n          <div class="item-detail">\n            <div class="detail-left">\n              <p class="item-name">${e.name}</p>\n              <div class="numbers">\n                <button class="item-detail__numbers__minus">-</button>\n                <p class="item-detail__numbers__number">${e.quantity}</p>\n                <button class="item-detail__numbers__plus">+</button>\n              </div>\n            </div>\n            <div class="item-price">$${e.price}</div>\n          </div> \n        </div>`}))}else if(e.target.matches(".item-detail__numbers__minus")){let t=e.target.closest(".main__cart__items__item").id;a.innerHTML="",_.forEach((e=>{e.id===Number(t)&&e.quantity>=2?(a.innerHTML+=`\n            <div class="main__cart__items__item" id = "${e.id}">\n              <div class="item-picture">\n                <img src="${e.img}" alt="">\n              </div>\n              <div class="item-detail">\n                <div class="detail-left">\n                  <p class="item-name">${e.name}</p>\n                  <div class="numbers">\n                    <button class="item-detail__numbers__minus">-</button>\n                    <p class="item-detail__numbers__number">${e.quantity-1}</p>\n                    <button class="item-detail__numbers__plus">+</button>\n                  </div>\n                </div>\n                <div class="item-price">$${e.price}</div>\n              </div>\n            </div>\n          `,e.quantity--,u()):a.innerHTML+=`<div class="main__cart__items__item" id = "${e.id}">\n              <div class="item-picture">\n                <img src="${e.img}" alt="">\n              </div>\n              <div class="item-detail">\n                <div class="detail-left">\n                  <p class="item-name">${e.name}</p>\n                  <div class="numbers">\n                    <button class="item-detail__numbers__minus">-</button>\n                    <p class="item-detail__numbers__number">${e.quantity}</p>\n                    <button class="item-detail__numbers__plus">+</button>\n                  </div>\n                </div> \n                <div class="item-price">$${e.price}</div>\n              </div>\n            </div>`}))}})),l.addEventListener("click",(function(e){e.target.matches(".standard")?(m.innerText="免費",r=0,u()):e.target.matches(".express")&&(m.innerText="$500",r=500,u())}))})();